{% extends "layout.html" %}
{% block title %}Sidereus – Exoplanet Classifier{% endblock %}
{% block content %}

  <div class="card">
    <div class="tabs">
      <button class="tab active" data-tab="simple">Consulta Simple</button>
      <button class="tab" data-tab="complete">Consulta Completa</button>
    </div>

    <div id="simpleForm" class="tab-content active">
      <form id="formSimple" class="form">
        <div class="form-grid">
          <div class="form-group">
            <label for="s_orbital_period">Período Orbital (días)</label>
            <input type="number" step="any" id="s_orbital_period" placeholder="Ej: 3.5234">
          </div>

          <div class="form-group">
            <label for="s_planet_radius">Radio del Planeta (R⊕)</label>
            <input type="number" step="any" id="s_planet_radius" placeholder="Ej: 1.2">
          </div>

          <div class="form-group full-width">
            <label for="s_equilibrium_temp">Temperatura de Equilibrio (K)</label>
            <input type="number" step="any" id="s_equilibrium_temp" placeholder="Ej: 288">
          </div>
        </div>

        <div id="simpleResult" class="result hidden"></div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary flex-1">
            <span class="loader hidden"></span>
            Generar Predicción
          </button>
          <button type="button" class="btn btn-outline" id="btnClearSimple" title="Limpiar">
            <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"/>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
          </button>
        </div>
      </form>
    </div>

    <div id="completeForm" class="tab-content">
      <form id="formComplete" class="form">
        <div class="form-grid">
          <div class="form-group">
            <label for="c_orbital_period">Período Orbital (días)</label>
            <input type="number" step="any" id="c_orbital_period" placeholder="Ej: 3.5234">
          </div>

          <div class="form-group">
            <label for="c_planet_radius">Radio del Planeta (R⊕)</label>
            <input type="number" step="any" id="c_planet_radius" placeholder="Ej: 1.2">
          </div>

          <div class="form-group">
            <label for="c_equilibrium_temp">Temperatura de Equilibrio (K)</label>
            <input type="number" step="any" id="c_equilibrium_temp" placeholder="Ej: 288">
          </div>

          <div class="form-group">
            <label for="c_insolation_flux">Flujo de Insolación</label>
            <input type="number" step="any" id="c_insolation_flux" placeholder="Ej: 1.0">
          </div>

          <div class="form-group">
            <label for="c_star_radius">Radio Estelar (R☉)</label>
            <input type="number" step="any" id="c_star_radius" placeholder="Ej: 1.0">
          </div>

          <div class="form-group">
            <label for="c_star_mass">Masa Estelar (M☉)</label>
            <input type="number" step="any" id="c_star_mass" placeholder="Ej: 1.0">
          </div>

          <div class="form-group">
            <label for="c_star_temp">Temperatura Estelar (K)</label>
            <input type="number" step="any" id="c_star_temp" placeholder="Ej: 5778">
          </div>

          <div class="form-group">
            <label for="c_transit_depth">Profundidad de Tránsito (ppm)</label>
            <input type="number" step="any" id="c_transit_depth" placeholder="Ej: 100">
          </div>
        </div>

        <div id="completeResult" class="result hidden"></div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary flex-1">
            <span class="loader hidden"></span>
            Generar Predicción
          </button>
          <button type="button" class="btn btn-outline" id="btnClearComplete" title="Limpiar">
            <svg class="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"/>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
          </button>
        </div>
      </form>
    </div>
  </div>

  <div id="dialogMetrics" class="dialog">
    <div class="dialog-overlay"></div>
    <div class="dialog-content">
      <div class="dialog-header">
        <h2>Model Data & Metrics</h2>
        <button class="dialog-close" data-close>&times;</button>
      </div>
      <p class="dialog-description">Performance metrics and threshold information for the exoplanet classification model</p>
      
      <div class="dialog-body">
        <div class="metrics-section">
          <h3>Overall Metrics</h3>
          <div class="metric-item">
            <div class="metric-header">
              <span class="metric-label">AUC (Area Under Curve)</span>
              <span class="metric-value" id="auc-text">—</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="auc-bar" style="width:0%"></div>
            </div>
          </div>

          <div class="metric-item">
            <div class="metric-header">
              <span class="metric-label">Average Precision</span>
              <span class="metric-value" id="ap-text">—</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" id="ap-bar" style="width:0%"></div>
            </div>
          </div>

          <div class="metric-item border-top">
            <div class="metric-header">
              <span class="metric-label">Validation Size</span>
              <span class="metric-value" id="val-size">—</span>
            </div>
          </div>
        </div>

        <div class="metrics-section">
          <h3>TAU Thresholds</h3>
          <div class="badges" id="tau-badges">
          </div>
        </div>

        <div class="data-sources">
          <h4>Data Sources</h4>
          <ul>
            <li>K2 Mission Dataset</li>
            <li>Kepler Objects of Interest (KOI)</li>
            <li>TESS Objects of Interest (TOI)</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div id="dialogEndpoints" class="dialog">
    <div class="dialog-overlay"></div>
    <div class="dialog-content">
      <div class="dialog-header">
        <h2>API Endpoints</h2>
        <button class="dialog-close" data-close>&times;</button>
      </div>
      <p class="dialog-description">Available REST API endpoints for the Sidereus exoplanet classification system</p>
      
      <div class="dialog-body scrollable">
        <div class="endpoints-section">
          <div class="endpoint-header">
            <span class="badge badge-green">GET</span>
            <h3>Read Endpoints</h3>
          </div>
          <ul class="endpoint-list" id="list-get">
            <li>Cargando…</li>
          </ul>
        </div>

        <div class="endpoints-section">
          <div class="endpoint-header">
            <span class="badge badge-blue">POST</span>
            <h3>Write Endpoints</h3>
          </div>
          <ul class="endpoint-list" id="list-post">
            <li>Cargando…</li>
          </ul>
        </div>

        <div class="example-request">
          <h4>Example Request</h4>
<pre><code>POST /api/calculateDisposition
Content-Type: application/json

{
  "orbital_period": 3.5234,
  "planet_radius": 1.2,
  "equilibrium_temp": 288
}</code></pre>
        </div>
      </div>
    </div>
  </div>

{% endblock %}
